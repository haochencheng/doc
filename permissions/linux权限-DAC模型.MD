## linux
### 自主访问控制（DAC: Discretionary Access Control）

```
系统会识别用户，然后根据被操作对象（Subject）的权限控制列表（ACL: Access Control List）或者权限控制矩阵（ACL: Access Control Matrix）的信息来决定用户的是否能对其进行哪些操作，例如读取或修改。

而拥有对象权限的用户，又可以将该对象的权限分配给其他用户，所以称之为“自主（Discretionary）”控制。

这种设计最常见的应用就是文件系统的权限设计，如微软的NTFS。

DAC最大缺陷就是对权限控制比较分散，不便于管理，比如无法简单地将一组文件设置统一的权限开放给指定的一群用户。
```

### 强制访问控制（MAC: Mandatory Access Control）
```
MAC是为了弥补DAC权限控制过于分散的问题而诞生的。在MAC的设计中，每一个对象都都有一些权限标识，每个用户同样也会有一些权限标识，而用户能否对该对象进行操作取决于双方的权限标识的关系，这个限制判断通常是由系统硬性限制的。比如在影视作品中我们经常能看到特工在查询机密文件时，屏幕提示需要“无法访问，需要一级安全许可”，这个例子中，文件上就有“一级安全许可”的权限标识，而用户并不具有。

```


一切皆文件，用户组、用户、文件权限 rwx
所以Linux 引入了2个文件来管理用户（组）， /etc/passwd存放用户，/etc/group存放组， 然后在文件系统中的每个文件的文件头里面添加了用户和文件之间的关系信息。

文件类型

Linux 中的文件有如下类型：

```
普通文件， 又包括文本文件和二进制文件， 可用 touch 创建；
套接字文件， 用于网络通讯，一般由应用程序在执行中间接创建；
管道文件是有名管道，而非无名管道， 可用 mkfifo 创建；
字符文件和块文件均为设备文件， 可用 mknod 创建；
链接文件是软链接文件，而非硬链接文件, 可用 ln 创建。
```
访问权限控制组

分为三组进行控制：

```
user 包含对文件属主设定的权限
group 包含对文件属组设定的权限
others 包含对其他者设定的权限
可设定的权限
```

```
用户和文件的关系只有2种， 拥有和不拥有
组和文件的关系只有2种，拥有和不拥有
用户和组的关系只有2种， 属于和不属于
```

下面给出常见（但非全部）的权限值， 包括：

```
r 表示具有读权限。
w 表示具有写权限。
x 一般针对可执行文件 / 目录，表示具有执行 / 搜索权限。
s 一般针对可执行文件 / 目录，表示具有赋予文件属主权限的权限，只有 user 和 group 组可以设置该权限。
t 一般针对目录，设置粘滞位后，有权限的用户只能写、删除自己的文件, 否则可写、删除目录所有文件。旧系统还表示可执行文件运行后将 text 拷贝到交换区提升速度。
```

mac下文件权限示例
```
-rw-r--r--@   1 haochencheng  staff    17K  8  1  2019 company_info.sql

每3个字符为一组，分别对应用户，组，其他用户，-表示无此权限
```

具体含义：

```
0 — 表示没有权限，二进制为000
1 –x 表示有执行权限，二进制为001
2 -w- 表示有写权限，二进制为010
3 -wx 表示有写和执行权限，二进制为011
4 r– 表示有读权限，二进制为100
5 r-x 表示有读和执行权限，二进制为101
6 rw- 表示有读和写权限，二进制为110
7 rwx 表示有读、写和执行权限，二进制为111

```
####    bit运算 

读权限 r=4，二进制表示为100     
写权限 w=2，二进制表示为010     
执行权限x=1，二进制表示为001        
6表示为110  
110 & 100 = 100 = 4 !=0 有读权限    
110 & 010 = 010 = 2 !=0 有写权限    
110 & 001 = 000 = 0 ==0 没有执行权限    

### 相除求余    
6表示为110  
(6 / 4) % 2 ==1 有读权限    
(6 / 2) % 2 ==1 有写权限    
(6 / 1) % 2 ==0 没有执行权限    

